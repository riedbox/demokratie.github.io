{% if page.meta.source %}
    <div class="source-links">
        {% for filename in page.meta.source %}
            <span class="label label-primary">{{ filename }}</span>
        {% endfor %}
    </div>
{% endif %}

<div class="row">
    {%- if page.parent %}
        <div class="col-md-2 d-flex justify-content-center">
            {%- block section_nav %}
                <div  class=" text-center page-nav bg-transparent">

                {% if page.meta.hauptbild %}
                    <img class="hauptbild" src="bilder/{{ page.meta.hauptbild }}" alt="Hauptbild">
                {%- endif %}
                {%- if page.parent %}
                    <ul class="nav flex-column">
                        {%- for nav_item in page.parent.children %}
                            {%- if not nav_item.children %}
                            <li class="navitem{% if nav_item.active %} active{% endif %}">
                                <a href="{{ nav_item.url|url }}" class="nav-link">{{ nav_item.title }}</a>
                            </li>
                            {%- endif %}
                        {%- endfor %}
                    </ul>
                {%- endif %}
                </div>
            {%- endblock %}
        </div>
    {%- endif %}
    <div class={{ "col-md-12" if (page.file.url == 'personen.html') else "col-md-6"}}>

        {% if page.meta.name %}
            <p class="name">{{ page.meta.name }}</p>
        {%- endif %}
        {% if page.meta.geburtsdaten %}
            <p class="geburtsdaten">{{ page.meta.geburtsdaten }}</p>
        {%- endif %}
        {{ page.content }}
    </div>

    {% if page.meta.bilder %}
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
            <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body">
            <div id="carouselExample" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    {% for item in page.meta.bilder %}
                    <div class="carousel-item {{ "active" if (loop.index == 1) else "" }}">
                    {% for key, value in item.items() %}
                    <img class="d-block w-100" src="bilder/{{ key }}" alt="{{ value.unterzeile }}">
                    <p class="m-3 text-center unterzeile">{{value.unterzeile }}</p>
                    {% endfor %}
                    </div>
                    {% endfor %}
                </div>
                <a class="carousel-control-prev" href="#carouselExample" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExample" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
                </a>
            </div>
            </div>
        </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="container uebersicht justify-content-center">
            {% for item in page.meta.bilder %}
                {% set slide_index = loop.index -1 %}
                {% for key, value in item.items() %}
                    <span data-toggle="modal" data-target="#exampleModal">
                        <img class="bild {{ value.format }}" src="bilder/{{ key }}" alt="{{ value.unterzeile }}"  data-target="#carouselExample"  data-slide-to="{{ slide_index  }}"/>
                    </span>
                {% endfor %}
            {% endfor %}
            </div>
    </div>
</div>
{%- endif %}